[gd_scene load_steps=34 format=3 uid="uid://cq8uyx8mlb50b"]

[ext_resource type="PackedScene" uid="uid://1aaa5eih6m57" path="res://scenes/main_char.tscn" id="1_s3esy"]
[ext_resource type="Script" uid="uid://86fuj3hh8l3s" path="res://scripts/gdscript/main_game.gd" id="1_sp04v"]
[ext_resource type="Texture2D" uid="uid://bp2gai5eo5ugt" path="res://assets/placeholders/Background/Gray.png" id="2_72e8q"]
[ext_resource type="PackedScene" uid="uid://do2diqnlwnw36" path="res://scenes/interaction.tscn" id="5_ipu61"]
[ext_resource type="Texture2D" uid="uid://oeu1y5ty8ms4" path="res://assets/placeholders/coffee/Vending Machine 3.1 (No Glass).png" id="6_o6v7o"]
[ext_resource type="Script" uid="uid://gmuhedcy630b" path="res://scripts/gdscript/coffee_get.gd" id="6_wjob3"]
[ext_resource type="Texture2D" uid="uid://bcdr5jo0wmy6o" path="res://assets/placeholders/coffee/Vending Machine 3.2 (No Glass).png" id="6_ygxny"]
[ext_resource type="Texture2D" uid="uid://dqjubtmu282hi" path="res://assets/placeholders/coffee/Vending Machine 3.1.png" id="7_wjob3"]
[ext_resource type="Texture2D" uid="uid://csy1j8ednu51j" path="res://assets/placeholders/coffee/Vending Machine 3.2.png" id="9_8xp80"]
[ext_resource type="Texture2D" uid="uid://cxx86hs4admrd" path="res://assets/placeholders/coffee/Vending Machine 3.3 (No Glass).png" id="10_sp04v"]
[ext_resource type="Texture2D" uid="uid://di1l7xqaedtgg" path="res://assets/placeholders/coffee/Vending Machine 3.3.png" id="11_ihbck"]
[ext_resource type="AudioStream" uid="uid://cbktokbnffifc" path="res://assets/music/Crying Boys Theme (DRAFT 1).mp3" id="14_8xp80"]
[ext_resource type="PackedScene" uid="uid://c2bvu0xtdr23g" path="res://scenes/ui.tscn" id="16_ihbck"]
[ext_resource type="Script" uid="uid://dkc7vwb3yl6y8" path="res://scripts/gdscript/tissues.gd" id="17_ikqpi"]
[ext_resource type="Texture2D" uid="uid://dii73j6f6427w" path="res://assets/placeholders/tissue.png" id="17_vnsdt"]
[ext_resource type="Script" uid="uid://cliq5cptj7o5w" path="res://scenes/main_painting.gd" id="18_ibnub"]
[ext_resource type="Texture2D" uid="uid://bkc2ehc1yga2d" path="res://assets/nasterpiece.png" id="19_5luka"]
[ext_resource type="Script" uid="uid://cjljq37gomrk7" path="res://scenes/cawfee_lady.gd" id="19_5wboo"]
[ext_resource type="Texture2D" uid="uid://brqawoqydtwds" path="res://assets/sprite/boy_painting_1.png" id="19_ibnub"]
[ext_resource type="Texture2D" uid="uid://brq57rhf3w40q" path="res://assets/sprite/lady_pick_me_up.png" id="20_5wboo"]
[ext_resource type="Texture2D" uid="uid://dux5nc2yqoh5g" path="res://assets/sprite/door_code.png" id="21_5wboo"]
[ext_resource type="Script" uid="uid://780u5wcs5ah0" path="res://scripts/gdscript/thedoor.gd" id="21_6de02"]
[ext_resource type="Texture2D" uid="uid://brri6a8c84rex" path="res://assets/sprite/other_boy.png" id="23_6de02"]
[ext_resource type="Script" uid="uid://dysq5taq3rq44" path="res://scripts/gdscript/boyfriend.gd" id="23_cybgu"]
[ext_resource type="Script" uid="uid://dcycl7vt0tqss" path="res://scenes/roof_portal.gd" id="25_wdxbp"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ikqpi"]

[sub_resource type="SpriteFrames" id="SpriteFrames_ikqpi"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_o6v7o")
}, {
"duration": 1.0,
"texture": ExtResource("7_wjob3")
}, {
"duration": 1.0,
"texture": ExtResource("6_ygxny")
}, {
"duration": 1.0,
"texture": ExtResource("9_8xp80")
}, {
"duration": 1.0,
"texture": ExtResource("10_sp04v")
}, {
"duration": 1.0,
"texture": ExtResource("11_ihbck")
}],
"loop": false,
"name": &"dispense",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_o6v7o")
}],
"loop": false,
"name": &"idle",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5luka"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_8xp80"]
bg_color = Color(0.431373, 0.431373, 0.431373, 0.596078)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color(0, 0, 0, 0.490196)
corner_radius_top_left = 5
corner_radius_top_right = 5
corner_detail = 20

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_sp04v"]
bg_color = Color(0.83624, 0.120665, 0, 1)

[sub_resource type="Theme" id="Theme_ihbck"]
ProgressBar/styles/background = SubResource("StyleBoxFlat_8xp80")
ProgressBar/styles/fill = SubResource("StyleBoxFlat_sp04v")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ibnub"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5wboo"]

[node name="Main_game" type="Node2D"]
z_index = 2
script = ExtResource("1_sp04v")

[node name="player" parent="." instance=ExtResource("1_s3esy")]
unique_name_in_owner = true
SPEED = 10000.0

[node name="Camera2D" type="Camera2D" parent="player"]
z_index = 40
position = Vector2(0, -2)
position_smoothing_enabled = true
position_smoothing_speed = 2.0

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="player"]
process_mode = 3
stream = ExtResource("14_8xp80")
volume_db = -29.633
autoplay = true
parameters/looping = true

[node name="backround" type="TextureRect" parent="."]
visible = false
z_index = -24
offset_left = -11023.0
offset_top = -5808.0
offset_right = 13850.0
offset_bottom = 6948.0
texture = ExtResource("2_72e8q")
stretch_mode = 1

[node name="UI" parent="." instance=ExtResource("16_ihbck")]
unique_name_in_owner = true
process_mode = 3

[node name="map" type="Node2D" parent="."]
position = Vector2(773, -1219)
scale = Vector2(0.498765, 0.5)

[node name="refrence" type="TextureRect" parent="map"]
z_index = -24
offset_left = -24153.0
offset_top = -8218.0
offset_right = -6836.0
offset_bottom = 870.0
texture = ExtResource("19_5luka")

[node name="outer_walls" type="StaticBody2D" parent="map"]

[node name="bottom wall" type="CollisionPolygon2D" parent="map/outer_walls"]
position = Vector2(1162, 312.585)
scale = Vector2(0.127997, 0.180593)
polygon = PackedVector2Array(-22547.3, 12505.5, -507.81, 12527.7, 85.9531, 13253.1, -23516.1, 13136.8)

[node name="left wall" type="CollisionPolygon2D" parent="map/outer_walls"]
polygon = PackedVector2Array(1101, 2561, 776, 1028, 907, 1007, 1232, 2699, 1173, 2689)

[node name="top wall" type="CollisionPolygon2D" parent="map/outer_walls"]
polygon = PackedVector2Array(861, 958, -1438, 926, -1390, 1034, 775, 1027)

[node name="right_wall" type="CollisionPolygon2D" parent="map/outer_walls"]
position = Vector2(20, 17)
polygon = PackedVector2Array(-1471, 914, -1912, 2661, -1742, 2547, -1419, 1017)

[node name="Polygon2D" type="Polygon2D" parent="map"]
z_index = -10
position = Vector2(1162, 312.585)
scale = Vector2(0.127997, 0.180593)
color = Color(1, 0.52549, 1, 1)
polygon = PackedVector2Array(-20000, 4000, -22500, 12500, -500, 12500, -3000, 4000)

[node name="Polygon2D" type="Polygon2D" parent="map/Polygon2D"]
position = Vector2(-7828.28, 4365.7)
scale = Vector2(0.304521, 0.4)
color = Color(0.586985, 0.821578, 0.305659, 1)
polygon = PackedVector2Array(-20000, 4000, -22500, 12500, -500, 12500, -3000, 4000, -12621.8, 4000)

[node name="inner_walls" type="StaticBody2D" parent="map"]

[node name="guard room" type="CollisionPolygon2D" parent="map/inner_walls"]
position = Vector2(1162, 312.585)
scale = Vector2(0.127997, 0.180593)
polygon = PackedVector2Array(-10344, 9393.57, -10344, 9111.17, -8453.29, 9100.09, -9047.06, 6137.63, -13680, 6115.48, -14344, 9133.32, -12094, 9133.32, -12140.9, 9415.72, -14680, 9382.5, -13906.5, 5938.29, -8742.36, 5949.37, -7984.53, 9349.27)

[node name="Sprites" type="Node2D" parent="map"]
position = Vector2(-1533, 2423)

[node name="Tissues" type="Node2D" parent="map/Sprites"]
position = Vector2(621, -541)
script = ExtResource("17_ikqpi")

[node name="sprite" type="Sprite2D" parent="map/Sprites/Tissues"]
scale = Vector2(0.1, 0.1)
texture = ExtResource("17_vnsdt")

[node name="interaction" parent="map/Sprites/Tissues" instance=ExtResource("5_ipu61")]
position = Vector2(-2, -2)
scale = Vector2(3.58061, 3.28961)
hint_text = "E to pick up"
shape = SubResource("RectangleShape2D_ikqpi")

[node name="coffe machine" type="Node2D" parent="map/Sprites"]
position = Vector2(1492, -955)
scale = Vector2(2, 2)
script = ExtResource("6_wjob3")

[node name="Sprite2D" type="AnimatedSprite2D" parent="map/Sprites/coffe machine"]
sprite_frames = SubResource("SpriteFrames_ikqpi")
animation = &"idle"
autoplay = "idle"

[node name="interaction" parent="map/Sprites/coffe machine" instance=ExtResource("5_ipu61")]
position = Vector2(-37, 17)
scale = Vector2(-8.75431, -6.2558)
hint_text = "E to coffee"
shape = SubResource("RectangleShape2D_5luka")

[node name="ProgressBar" type="ProgressBar" parent="map/Sprites/coffe machine"]
offset_left = -23.0
offset_top = -35.0
offset_right = 23.0
offset_bottom = -22.0
theme = SubResource("Theme_ihbck")
max_value = 5.0
show_percentage = false

[node name="main_painting" type="Node2D" parent="map/Sprites"]
position = Vector2(546, -1522)
script = ExtResource("18_ibnub")

[node name="Sprite2D" type="Sprite2D" parent="map/Sprites/main_painting"]
scale = Vector2(0.4, 0.4)
texture = ExtResource("19_ibnub")

[node name="interaction" parent="map/Sprites/main_painting" instance=ExtResource("5_ipu61")]
position = Vector2(-9, 230)
scale = Vector2(-17.3891, -9.32756)
hint_text = "Press E to examine the boy"
shape = SubResource("RectangleShape2D_ibnub")

[node name="cawfee_lady" type="Node2D" parent="map/Sprites"]
position = Vector2(1987, -1507)
script = ExtResource("19_5wboo")

[node name="Sprite2D" type="Sprite2D" parent="map/Sprites/cawfee_lady"]
scale = Vector2(0.4, 0.4)
texture = ExtResource("20_5wboo")

[node name="interaction" parent="map/Sprites/cawfee_lady" instance=ExtResource("5_ipu61")]
position = Vector2(-9, 230)
scale = Vector2(-32.6101, -10.0236)
hint_text = "Press E to talk to the lady"
shape = SubResource("RectangleShape2D_5wboo")

[node name="thedoor" type="Node2D" parent="map/Sprites"]
position = Vector2(2832.21, 1)
script = ExtResource("21_6de02")

[node name="door" type="Sprite2D" parent="map/Sprites/thedoor"]
scale = Vector2(0.810143, 0.752472)
texture = ExtResource("21_5wboo")

[node name="interaction" parent="map/Sprites/thedoor" instance=ExtResource("5_ipu61")]
position = Vector2(-266.45, -41)
scale = Vector2(8.2911, 20)
hint_text = "E to open door?"
shape = SubResource("RectangleShape2D_5wboo")

[node name="boyfriend" type="Node2D" parent="map/Sprites"]
position = Vector2(7469.66, -59)
script = ExtResource("23_cybgu")

[node name="sprite" type="Sprite2D" parent="map/Sprites/boyfriend"]
z_index = 3
position = Vector2(2.00495, -24)
texture = ExtResource("23_6de02")

[node name="interaction" parent="map/Sprites/boyfriend" instance=ExtResource("5_ipu61")]
position = Vector2(2.00489, -126)
scale = Vector2(31.5608, 26.5305)
hint_text = "E to Talk to him"
shape = SubResource("RectangleShape2D_5wboo")

[node name="roof" type="StaticBody2D" parent="map"]
position = Vector2(66.1634, -12)

[node name="floor" type="Polygon2D" parent="map/roof"]
z_index = -6
position = Vector2(0.00048949, 2.00024)
color = Color(1, 0.47451, 1, 1)
polygon = PackedVector2Array(4835.94, 1940, 4647.48, 2816, 6257.46, 2812, 6119.11, 1940)

[node name="roof_portal" type="Polygon2D" parent="map/roof"]
z_index = -6
position = Vector2(70.1733, -230)
color = Color(0.115234, 0.64766, 0, 1)
polygon = PackedVector2Array(4819.9, 2528, 4751.74, 2648, 4781.81, 2738, 4831.93, 2696, 4849.98, 2638)
script = ExtResource("25_wdxbp")

[node name="interaction" parent="map/roof/roof_portal" instance=ExtResource("5_ipu61")]
position = Vector2(4719.66, 2620)
scale = Vector2(4.68216, 20)
hint_text = "E to open door?"
shape = SubResource("RectangleShape2D_5wboo")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="map/roof"]
polygon = PackedVector2Array(4645.47, 2818, 4583.32, 2832, 4789.83, 1798, 6255.45, 1806, 6391.79, 2930, 4507.13, 3022, 4649.48, 2818, 6259.46, 2812, 6121.12, 1940, 4831.93, 1934)

[connection signal="tissueGot" from="map/Sprites/Tissues" to="UI" method="_on_tissues_tissue_got"]
[connection signal="tissueGot" from="map/Sprites/Tissues" to="map/Sprites/main_painting" method="_on_tissues_tissue_got"]
[connection signal="CoffeIsDone" from="map/Sprites/coffe machine" to="UI" method="_on_coffe_machine_coffe_is_done"]
[connection signal="CoffeIsDone" from="map/Sprites/coffe machine" to="map/Sprites/cawfee_lady" method="_on_coffe_machine_coffe_is_done"]
[connection signal="dialogStart" from="map/Sprites/main_painting" to="UI" method="_on_dialog_start"]
[connection signal="dialogStart" from="map/Sprites/cawfee_lady" to="UI" method="_on_dialog_start"]
[connection signal="hasKeyCode" from="map/Sprites/cawfee_lady" to="map/Sprites/thedoor" method="_on_cawfee_lady_has_key_code"]
[connection signal="allowTears" from="map/Sprites/boyfriend" to="map/Sprites/main_painting" method="_on_boyfriend_allow_tears"]
[connection signal="dialogStart" from="map/Sprites/boyfriend" to="UI" method="_on_dialog_start"]
